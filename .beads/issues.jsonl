{"id":"sanksrit-student-2wx","title":"Implement ScriptDetector for Devanagari/IAST detection","description":"## Summary\n\nCreate the ScriptDetector component that determines whether input text is Devanagari, IAST, or mixed script.\n\n## Implementation\n\nCreate `src/domain/script-detector.ts`:\n\n```typescript\ntype ScriptType = 'devanagari' | 'iast' | 'mixed';\n\ninterface ScriptDetector {\n  detect(text: string): ScriptType;\n}\n```\n\n### Detection Logic\n- Devanagari: Unicode range U+0900–U+097F\n- IAST: Latin characters (with or without diacritics)\n- Mixed: both Devanagari and Latin present → error case\n- Neutral characters (spaces, numerals, punctuation) should not affect detection\n\n## References\n- Design: `docs/002-devanagari/high-level-design.md`\n- Acceptance criteria: `docs/002-devanagari/acceptance-criteria.md` (Mixed Input Format Detection)","status":"open","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-19T10:21:17.684116-08:00","created_by":"David Van Couvering","updated_at":"2026-01-19T10:21:17.684116-08:00","dependencies":[{"issue_id":"sanksrit-student-2wx","depends_on_id":"sanksrit-student-6sa","type":"blocks","created_at":"2026-01-22T20:34:29.492857-08:00","created_by":"David Van Couvering"}]}
{"id":"sanksrit-student-2zh","title":"Acceptance criteria for basic Sanskrit sutra translation","description":"Created acceptance criteria in Gherkin format for the basic Sanskrit sutra translation feature. Covers word-by-word breakdown and multiple translation alternatives.","status":"closed","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-17T14:22:45.512986-08:00","created_by":"David Van Couvering","updated_at":"2026-01-17T14:24:47.28704-08:00","closed_at":"2026-01-17T14:24:47.28704-08:00","close_reason":"Closed"}
{"id":"sanksrit-student-3rz","title":"Improve CLI execution: replace esbuild bundling with native ESM support","description":"## Background\n\nWhen writing CLI tests, we discovered that `npx tsx` hangs when running files with async dynamic imports. The workaround was to use esbuild to bundle to CommonJS:\n\n```json\n\"build:cli\": \"esbuild src/cli.ts --bundle --platform=node --outfile=dist/cli.cjs --format=cjs\"\n```\n\n## Research Findings\n\n### Root Cause\nThe tsx/ts-node ecosystem has known issues mixing CommonJS and ESM modules:\n- [ts-node-dev #259](https://github.com/wclr/ts-node-dev/issues/259) - Dynamic import hangs (unresolved, repo archived)\n- [tsx #499](https://github.com/privatenumber/tsx/issues/499) - Dynamic import in CJS can execute modules twice\n\nThe current code uses synchronous `require()` in an ESM project:\n```typescript\n// src/cli.ts line 24\nconst { ClaudeLlmClient } = require('./adapters/claude-llm-client');\n```\n\n### Node.js Has Fixed This\n\nNode.js now has stable native `require(esm)` support:\n- v20.19.0+ (unflagged)\n- v22.12.0+ (unflagged)\n- v23+ (enabled by default)\n\nSee: [require(esm) in Node.js: from experiment to stability](https://joyeecheung.github.io/blog/2025/12/30/require-esm-in-node-js-from-experiment-to-stability/)\n\n**Current project uses Node.js v20.0.0** which lacks this support.\n\n## Recommended Approach\n\n### Option A: Upgrade Node.js + Use async import() (Recommended)\n\n1. Add `engines` field to package.json:\n   ```json\n   \"engines\": { \"node\": \"\u003e=20.19.0\" }\n   ```\n\n2. Replace synchronous `require()` with async `import()`:\n   ```typescript\n   async function createClient(useMock: boolean): Promise\u003cLlmClient\u003e {\n     if (useMock) {\n       return new MockLlmClient();\n     }\n     const { ClaudeLlmClient } = await import('./adapters/claude-llm-client.js');\n     return new ClaudeLlmClient();\n   }\n   ```\n\n3. Update translate script to use tsx directly:\n   ```bash\n   exec npx tsx \"$SCRIPT_DIR/src/cli.ts\" \"$@\"\n   ```\n\n4. Remove `build:cli` script (no longer needed for dev)\n\n### Benefits\n- No build step required for development\n- Proper ESM throughout\n- Smaller development footprint\n- Aligns with modern Node.js practices\n\n### Option B: Keep esbuild for production only\n\nCould keep esbuild bundling as an optional production optimization while using tsx for development.\n\n## Acceptance Criteria\n\n- [ ] Node.js \u003e=20.19.0 required in package.json engines\n- [ ] CLI uses async `import()` instead of `require()`\n- [ ] translate script works without pre-building (uses tsx)\n- [ ] All existing tests pass\n- [ ] Document the change","status":"closed","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-17T18:50:24.917877-08:00","created_by":"David Van Couvering","updated_at":"2026-01-17T21:01:01.510153-08:00","closed_at":"2026-01-17T21:01:01.510153-08:00","close_reason":"Closed"}
{"id":"sanksrit-student-4jz","title":"Implement TranslationService interface with LlmClient","description":"Create a class that implements the TranslationService interface in src/domain/translation-service.ts. Takes LlmClient via constructor injection. The existing TranslationService interface remains as the port for GraphQL. The implementation class (e.g., LlmTranslationService or TranslationServiceImpl) calls LlmClient.translateSutra() and transforms the response into TranslationResult.","status":"closed","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-17T16:24:24.121535-08:00","created_by":"David Van Couvering","updated_at":"2026-01-17T17:53:22.619107-08:00","closed_at":"2026-01-17T17:53:22.619107-08:00","close_reason":"Closed","dependencies":[{"issue_id":"sanksrit-student-4jz","depends_on_id":"sanksrit-student-rup","type":"blocks","created_at":"2026-01-17T16:24:24.123417-08:00","created_by":"David Van Couvering"},{"issue_id":"sanksrit-student-4jz","depends_on_id":"sanksrit-student-tbg","type":"blocks","created_at":"2026-01-17T16:30:57.16046-08:00","created_by":"David Van Couvering"}]}
{"id":"sanksrit-student-55v","title":"Implement MockLlmClient adapter","description":"Create mock implementation in src/adapters/mock-llm-client.ts that implements LlmClient interface. Returns stubbed responses for known test sutras (e.g., 'atha yogānuśāsanam'). Returns a generic valid response for unknown input. No external dependencies.","status":"closed","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-17T16:24:23.734833-08:00","created_by":"David Van Couvering","updated_at":"2026-01-17T17:53:22.709359-08:00","closed_at":"2026-01-17T17:53:22.709359-08:00","close_reason":"Closed","dependencies":[{"issue_id":"sanksrit-student-55v","depends_on_id":"sanksrit-student-rup","type":"blocks","created_at":"2026-01-17T16:24:23.736457-08:00","created_by":"David Van Couvering"}]}
{"id":"sanksrit-student-61c","title":"Implement LlmTranslationService adapter","description":"Create Claude-powered implementation in src/adapters/llm-translation-service.ts. Can be done after acceptance tests pass with mock. Not required for tests to pass.","status":"closed","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-17T14:51:28.619373-08:00","created_by":"David Van Couvering","updated_at":"2026-01-17T16:22:39.946741-08:00","closed_at":"2026-01-17T16:22:39.946741-08:00","close_reason":"Misaligned with design - should be ClaudeLlmClient, not LlmTranslationService","dependencies":[{"issue_id":"sanksrit-student-61c","depends_on_id":"sanksrit-student-9wl","type":"blocks","created_at":"2026-01-17T14:51:28.621558-08:00","created_by":"David Van Couvering"},{"issue_id":"sanksrit-student-61c","depends_on_id":"sanksrit-student-tbg","type":"blocks","created_at":"2026-01-17T14:51:28.624454-08:00","created_by":"David Van Couvering"}]}
{"id":"sanksrit-student-6l4","title":"Implement ClaudeLlmClient adapter","description":"Create Claude-powered implementation in src/adapters/claude-llm-client.ts. Implements LlmClient interface. Constructs prompt asking Claude for word-by-word breakdown, parses response into LlmTranslationResponse format. Handles errors gracefully. Requires ANTHROPIC_API_KEY. Can be done after acceptance tests pass.","status":"closed","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-17T16:24:41.085861-08:00","created_by":"David Van Couvering","updated_at":"2026-01-17T17:53:22.808138-08:00","closed_at":"2026-01-17T17:53:22.808138-08:00","close_reason":"Closed","dependencies":[{"issue_id":"sanksrit-student-6l4","depends_on_id":"sanksrit-student-rup","type":"blocks","created_at":"2026-01-17T16:24:41.087506-08:00","created_by":"David Van Couvering"}]}
{"id":"sanksrit-student-6o4","title":"Acceptance test: Display word meanings for a simple sutra","description":"Write acceptance test for first Gherkin scenario - CLI submits sutra, receives word-by-word breakdown with grammatical forms and meanings","status":"closed","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-17T14:36:25.030775-08:00","created_by":"David Van Couvering","updated_at":"2026-01-17T14:46:32.441594-08:00","closed_at":"2026-01-17T14:46:32.441594-08:00","close_reason":"Closed"}
{"id":"sanksrit-student-6sa","title":"Write acceptance tests for Devanagari script input support","description":"## Summary\n\nImplement acceptance tests for Devanagari script input support as defined in `docs/002-devanagari/acceptance-criteria.md` and `docs/002-devanagari/test-plan.md`.\n\n## Acceptance Criteria\n\nTests should cover all scenarios from the acceptance criteria:\n\n### Feature: Accept Devanagari Script Input\n- Translate a sutra provided in Devanagari script\n- Handle Devanagari compound words and sandhi\n\n### Feature: Devanagari Special Character Handling\n- Handle avagraha (ऽ) → apostrophe\n- Handle anusvara (ं) → ṃ\n- Handle visarga (ः) → ḥ\n- Handle consonant conjuncts\n- Handle chandrabindu (ँ)\n\n### Feature: Mixed Input Format Detection\n- Auto-detect Devanagari input\n- Auto-detect IAST input (existing behavior preserved)\n- Reject mixed script input with error\n- Handle neutral characters (spaces, numerals, punctuation)\n\n## Implementation Notes\n\n- Create new test file: `tests/acceptance/devanagari-input.test.ts`\n- Use structured naming convention: `describe('Feature: ...')` \u003e `describe('Scenario: ...')` \u003e `it('...')`\n- Reuse test helpers extracted in the prerequisite issue\n- Update `MockLlmClient` with Devanagari test cases that normalize to existing IAST entries\n\n## References\n\n- Acceptance criteria: `docs/002-devanagari/acceptance-criteria.md`\n- Test plan: `docs/002-devanagari/test-plan.md`\n- High-level design: `docs/002-devanagari/high-level-design.md`","status":"open","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-19T10:19:55.278376-08:00","created_by":"David Van Couvering","updated_at":"2026-01-19T10:19:55.278376-08:00","dependencies":[{"issue_id":"sanksrit-student-6sa","depends_on_id":"sanksrit-student-km8","type":"blocks","created_at":"2026-01-19T10:19:59.492519-08:00","created_by":"David Van Couvering"}]}
{"id":"sanksrit-student-6u6","title":"Update test design to use mock LLM","description":"Revise test-design.md to use mock/fake LLM for acceptance tests. Avoid real LLM calls and costs during testing.","status":"closed","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-17T14:58:23.775096-08:00","created_by":"David Van Couvering","updated_at":"2026-01-17T15:08:56.248351-08:00","closed_at":"2026-01-17T15:08:56.248351-08:00","close_reason":"Closed"}
{"id":"sanksrit-student-7xi","title":"Implement NormalizingTranslationService wrapper","description":"## Summary\n\nCreate the NormalizingTranslationService that wraps the existing TranslationService, adding script normalization before translation.\n\n## Implementation\n\nCreate `src/adapters/normalizing-translation-service.ts`:\n\n```typescript\nclass NormalizingTranslationService implements TranslationService {\n  constructor(\n    private normalizer: ScriptNormalizer,\n    private delegate: TranslationService\n  ) {}\n\n  async translateSutra(sutra: string): Promise\u003cTranslationResult\u003e {\n    const normalized = this.normalizer.normalize(sutra);\n    if (!normalized.success) {\n      throw new TranslationError(normalized.error);\n    }\n    const result = await this.delegate.translateSutra(normalized.iast);\n    // Preserve original text in response\n    return { ...result, originalText: sutra };\n  }\n}\n```\n\n### Notes\n- Implements decorator pattern\n- Preserves original input text (Devanagari or IAST) in response\n- Delegates to existing translation service after normalization\n\n## References\n- Design: `docs/002-devanagari/high-level-design.md`","status":"open","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-19T10:21:39.713151-08:00","created_by":"David Van Couvering","updated_at":"2026-01-19T10:21:39.713151-08:00","dependencies":[{"issue_id":"sanksrit-student-7xi","depends_on_id":"sanksrit-student-d09","type":"blocks","created_at":"2026-01-19T10:21:57.30841-08:00","created_by":"David Van Couvering"}]}
{"id":"sanksrit-student-9m1","title":"Wire up GraphQL resolver with TranslationService","description":"Update src/server.ts to accept TranslationService via dependency injection and call it in the translateSutra resolver","status":"closed","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-17T14:51:33.076284-08:00","created_by":"David Van Couvering","updated_at":"2026-01-17T16:22:45.212885-08:00","closed_at":"2026-01-17T16:22:45.212885-08:00","close_reason":"Will recreate with correct dependencies aligned to current-plan.md","dependencies":[{"issue_id":"sanksrit-student-9m1","depends_on_id":"sanksrit-student-61c","type":"blocks","created_at":"2026-01-17T14:51:33.077757-08:00","created_by":"David Van Couvering"},{"issue_id":"sanksrit-student-9m1","depends_on_id":"sanksrit-student-ndv","type":"blocks","created_at":"2026-01-17T15:00:19.475674-08:00","created_by":"David Van Couvering"}]}
{"id":"sanksrit-student-9wl","title":"Define domain types for translation result","description":"Create TypeScript types (WordEntry, TranslationResult) in src/domain/types.ts","status":"closed","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-17T14:51:23.182674-08:00","created_by":"David Van Couvering","updated_at":"2026-01-17T16:14:51.861408-08:00","closed_at":"2026-01-17T16:14:51.861408-08:00","close_reason":"Closed"}
{"id":"sanksrit-student-9yt","title":"Wire up GraphQL resolver with dependency injection","description":"Update src/server.ts to: (1) Accept TranslationService via dependency injection, (2) Call translationService.translate() in the translateSutra resolver, (3) Provide factory functions for test (mock) and production configurations. Update tests/helpers/test-server.ts to inject MockLlmClient -\u003e TranslationService.","status":"closed","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-17T16:24:31.543453-08:00","created_by":"David Van Couvering","updated_at":"2026-01-17T18:05:19.358932-08:00","closed_at":"2026-01-17T18:05:19.358932-08:00","close_reason":"Closed","dependencies":[{"issue_id":"sanksrit-student-9yt","depends_on_id":"sanksrit-student-55v","type":"blocks","created_at":"2026-01-17T16:24:31.54528-08:00","created_by":"David Van Couvering"},{"issue_id":"sanksrit-student-9yt","depends_on_id":"sanksrit-student-4jz","type":"blocks","created_at":"2026-01-17T16:24:31.547114-08:00","created_by":"David Van Couvering"}]}
{"id":"sanksrit-student-at3","title":"Document testing strategy in test-design.md","description":"Create docs/001-basic-translation/test-design.md describing strategy for running tests locally and testing the deployed service","status":"closed","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-17T14:56:06.72321-08:00","created_by":"David Van Couvering","updated_at":"2026-01-17T14:56:52.429403-08:00","closed_at":"2026-01-17T14:56:52.429403-08:00","close_reason":"Closed"}
{"id":"sanksrit-student-cha","title":"Remove unit tests per testing guidelines","description":"Per testing guidelines in AGENTS.md: 'DO NOT WRITE UNIT TESTS. I'll tell you if I want them. Just rely on acceptance tests.'\n\n## Files to remove:\n- `tests/unit/prompt-loader.test.ts`\n- `tests/unit/` directory (if empty after removal)\n\n## Acceptance Criteria:\n- [ ] Unit test file removed\n- [ ] All acceptance tests still pass\n- [ ] No broken imports or references","status":"closed","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-17T18:15:29.161661-08:00","created_by":"David Van Couvering","updated_at":"2026-01-17T18:17:29.802254-08:00","closed_at":"2026-01-17T18:17:29.802254-08:00","close_reason":"Closed"}
{"id":"sanksrit-student-d09","title":"Implement ScriptNormalizer to orchestrate detection and conversion","description":"## Summary\n\nCreate the ScriptNormalizer that orchestrates script detection and conversion, providing a single entry point for normalizing input to IAST.\n\n## Implementation\n\nCreate `src/domain/script-normalizer.ts`:\n\n```typescript\ninterface ScriptNormalizer {\n  normalize(text: string): NormalizationResult;\n}\n\ntype NormalizationResult =\n  | { success: true; iast: string; originalScript: ScriptType }\n  | { success: false; error: string };\n```\n\n### Logic\n- Use ScriptDetector to determine input type\n- If Devanagari → convert using injected ScriptConverter\n- If IAST → pass through unchanged\n- If mixed → return error with helpful message\n\n### Dependencies\n- Depends on ScriptDetector interface\n- Depends on ScriptConverter interface\n- Uses dependency injection for both\n\n## References\n- Design: `docs/002-devanagari/high-level-design.md`","status":"open","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-19T10:21:32.074259-08:00","created_by":"David Van Couvering","updated_at":"2026-01-19T10:21:32.074259-08:00","dependencies":[{"issue_id":"sanksrit-student-d09","depends_on_id":"sanksrit-student-2wx","type":"blocks","created_at":"2026-01-19T10:21:52.961628-08:00","created_by":"David Van Couvering"},{"issue_id":"sanksrit-student-d09","depends_on_id":"sanksrit-student-ndg","type":"blocks","created_at":"2026-01-19T10:21:53.098807-08:00","created_by":"David Van Couvering"}]}
{"id":"sanksrit-student-h3t","title":"Extract LLM prompt into configuration file","description":"Extract the Sanskrit translation prompt from ClaudeLlmClient.buildPrompt() into a separate configuration file.\n\n**Current location:** src/adapters/claude-llm-client.ts lines 77-95\n\n**Benefits:**\n- Easier to view and edit the prompt without navigating code\n- Enables prompt tuning without code changes\n- Separates prompt content from implementation logic\n- Could support multiple prompt variants for A/B testing\n\n**Suggested approach:**\n- Create a prompts/ or config/ directory\n- Use a template file format (e.g., .txt or .yaml) for the prompt\n- Support variable substitution for the sutra input\n- Keep the prompt loading in ClaudeLlmClient","status":"closed","priority":3,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-17T17:59:23.07311-08:00","created_by":"David Van Couvering","updated_at":"2026-01-17T18:07:53.438943-08:00","closed_at":"2026-01-17T18:07:53.438943-08:00","close_reason":"Closed"}
{"id":"sanksrit-student-ia7","title":"Write CLI acceptance tests (red)","description":"Write acceptance tests for the CLI before implementation.\n\n## Tests to Write (tests/acceptance/cli.test.ts)\n\n1. **Basic invocation** - CLI with --mock flag returns valid JSON output\n2. **Missing sutra argument** - CLI shows error when no sutra provided  \n3. **Output structure** - Verify JSON contains originalText and words array with expected fields\n\n## Approach\n- Execute CLI as subprocess using Node's child_process\n- Parse JSON stdout and validate structure\n- Tests should FAIL initially (red phase of TDD)\n\n## Acceptance Criteria\n- [ ] Test file created at tests/acceptance/cli.test.ts\n- [ ] Tests execute and fail with clear error (CLI not found or not working)\n- [ ] Tests verify JSON output structure matches TranslationResult type","status":"closed","priority":2,"issue_type":"task","assignee":"David Van Couvering","owner":"david.vancouvering@gmail.com","created_at":"2026-01-17T18:27:45.979326-08:00","created_by":"David Van Couvering","updated_at":"2026-01-17T18:32:14.517001-08:00","closed_at":"2026-01-17T18:32:14.517001-08:00","close_reason":"Closed"}
{"id":"sanksrit-student-km8","title":"Restructure existing acceptance tests to match acceptance criteria format","description":"## Summary\n\nRefactor existing acceptance tests in `tests/acceptance/word-translation.test.ts` to use structured naming that mirrors the acceptance criteria in `docs/001-basic-translation/acceptance-criteria.md`.\n\n## Acceptance Criteria\n\n- Tests use `describe('Feature: ...')` blocks matching feature names in acceptance criteria\n- Tests use nested `describe('Scenario: ...')` blocks matching scenario names\n- Test descriptions (`it('...')`) reflect the Then/And clauses\n- Extract reusable test helpers (e.g., GraphQL query execution, common assertions) for use by future test files\n\n## Current State\n\n```typescript\ndescribe('Display word meanings for a simple sutra', () =\u003e {\n  it('should return word-by-word breakdown with meanings', async () =\u003e {\n```\n\n## Target State\n\n```typescript\ndescribe('Feature: Sanskrit Sutra Word-by-Word Translation', () =\u003e {\n  describe('Scenario: Display word meanings for a simple sutra', () =\u003e {\n    it('should see each word from the sutra listed separately', async () =\u003e {\n    it('should have one or more meanings provided for each word', async () =\u003e {\n```\n\n## Notes\n\n- Consider extracting shared test utilities to `tests/helpers/` for reuse in Devanagari tests","status":"open","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-19T10:19:43.375536-08:00","created_by":"David Van Couvering","updated_at":"2026-01-19T10:19:43.375536-08:00"}
{"id":"sanksrit-student-ndg","title":"Implement ScriptConverter port and SanscriptConverter adapter","description":"## Summary\n\nCreate the ScriptConverter port interface and the SanscriptConverter adapter that uses `@indic-transliteration/sanscript` library.\n\n## Implementation\n\n### Port Interface\nCreate `src/domain/script-converter.ts`:\n\n```typescript\ninterface ScriptConverter {\n  toIast(devanagari: string): string;\n}\n```\n\n### Adapter\nCreate `src/adapters/sanscript-converter.ts`:\n- Install `@indic-transliteration/sanscript` package\n- Implement ScriptConverter interface using the library\n- Handle special characters: avagraha (ऽ), anusvara (ं), visarga (ः), consonant conjuncts, chandrabindu (ँ)\n\n## Dependencies\n- npm: `@indic-transliteration/sanscript`\n\n## References\n- Design: `docs/002-devanagari/high-level-design.md`\n- Acceptance criteria: `docs/002-devanagari/acceptance-criteria.md` (Special Character Handling)","status":"open","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-19T10:21:24.768162-08:00","created_by":"David Van Couvering","updated_at":"2026-01-19T10:21:24.768162-08:00","dependencies":[{"issue_id":"sanksrit-student-ndg","depends_on_id":"sanksrit-student-6sa","type":"blocks","created_at":"2026-01-22T20:34:29.629262-08:00","created_by":"David Van Couvering"}]}
{"id":"sanksrit-student-ndv","title":"Implement MockTranslationService for tests","description":"Create mock implementation in tests/mocks/mock-translation-service.ts that returns stubbed responses for known test sutras","status":"closed","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-17T14:59:41.878782-08:00","created_by":"David Van Couvering","updated_at":"2026-01-17T16:22:39.546265-08:00","closed_at":"2026-01-17T16:22:39.546265-08:00","close_reason":"Misaligned with design - should be MockLlmClient, not MockTranslationService","dependencies":[{"issue_id":"sanksrit-student-ndv","depends_on_id":"sanksrit-student-9wl","type":"blocks","created_at":"2026-01-17T14:59:41.881739-08:00","created_by":"David Van Couvering"},{"issue_id":"sanksrit-student-ndv","depends_on_id":"sanksrit-student-tbg","type":"blocks","created_at":"2026-01-17T14:59:41.884132-08:00","created_by":"David Van Couvering"}]}
{"id":"sanksrit-student-ocp","title":"High-level design document for Sanskrit translation service","description":"Document architecture decisions: TypeScript, Vercel serverless, GraphQL API, LLM-powered translations","status":"closed","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-17T14:36:24.739645-08:00","created_by":"David Van Couvering","updated_at":"2026-01-17T14:41:06.858457-08:00","closed_at":"2026-01-17T14:41:06.858457-08:00","close_reason":"Closed"}
{"id":"sanksrit-student-p5o","title":"Implement CLI to pass acceptance tests (green)","description":"Implement the CLI to make the acceptance tests pass.\n\n## Files to Create/Modify\n\n| File | Action | Purpose |\n|------|--------|---------|\n| translate | Create | Shell script wrapper for easy CLI invocation |\n| src/cli.ts | Create | Main CLI entry point |\n\n## Implementation\n\n1. Create `translate` shell script that runs `npx tsx src/cli.ts \"$@\"`\n2. Parse command-line arguments for --mock flag and sutra text\n3. Instantiate MockLlmClient (if --mock) or ClaudeLlmClient (default)\n4. Create LlmTranslationService with the chosen client\n5. Call translate() and output result as JSON\n6. Handle errors (missing sutra, missing API key)\n\n## Acceptance Criteria\n- [ ] All CLI acceptance tests pass\n- [ ] ./translate --mock \"sutra\" works\n- [ ] Helpful error shown if sutra not provided","status":"closed","priority":2,"issue_type":"task","assignee":"David Van Couvering","owner":"david.vancouvering@gmail.com","created_at":"2026-01-17T18:27:51.681332-08:00","created_by":"David Van Couvering","updated_at":"2026-01-17T18:45:49.960954-08:00","closed_at":"2026-01-17T18:45:49.960954-08:00","close_reason":"Closed","dependencies":[{"issue_id":"sanksrit-student-p5o","depends_on_id":"sanksrit-student-ia7","type":"blocks","created_at":"2026-01-17T18:27:56.25474-08:00","created_by":"David Van Couvering"}]}
{"id":"sanksrit-student-r4l","title":"Develop test strategy for prompt quality","description":"Create a strategy for testing and validating the quality of the LLM prompt used for Sanskrit translation.\n\n## Context\nThe system uses an LLM prompt to generate word-by-word Sanskrit translations. We need a way to evaluate whether the prompt produces accurate, consistent, and useful results.\n\n## Considerations\n- How to measure translation accuracy\n- How to evaluate grammatical form correctness\n- Benchmark sutras with known correct translations\n- Regression testing when prompt changes\n- Metrics for quality (precision, consistency, completeness)\n\n## Deliverable\nA documented test strategy for prompt quality validation.","status":"open","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-17T18:25:34.357079-08:00","created_by":"David Van Couvering","updated_at":"2026-01-17T18:30:42.880981-08:00","defer_until":"2026-01-31T18:30:42-08:00"}
{"id":"sanksrit-student-rup","title":"Define LlmClient interface (port)","description":"Create the port interface that abstracts LLM interaction in src/domain/llm-client.ts. This allows swapping mock and real implementations. Interface should define translateSutra(sutra: string): Promise\u003cLlmTranslationResponse\u003e where LlmTranslationResponse contains the raw word breakdown from the LLM.","status":"closed","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-17T16:24:15.558655-08:00","created_by":"David Van Couvering","updated_at":"2026-01-17T16:42:10.244361-08:00","closed_at":"2026-01-17T16:42:10.244361-08:00","close_reason":"Closed","dependencies":[{"issue_id":"sanksrit-student-rup","depends_on_id":"sanksrit-student-9wl","type":"blocks","created_at":"2026-01-17T16:24:15.562439-08:00","created_by":"David Van Couvering"}]}
{"id":"sanksrit-student-s9y","title":"Wire up Devanagari support in dependency injection","description":"## Summary\n\nWire up all the new Devanagari components in the dependency injection points (server.ts and cli.ts).\n\n## Implementation\n\nUpdate `src/server.ts` and `src/cli.ts`:\n- Instantiate ScriptDetector\n- Instantiate SanscriptConverter (adapter)\n- Instantiate ScriptNormalizer with detector and converter\n- Wrap existing TranslationService with NormalizingTranslationService\n\n### Example wiring\n\n```typescript\nconst scriptDetector = new ScriptDetector();\nconst scriptConverter = new SanscriptConverter();\nconst scriptNormalizer = new ScriptNormalizer(scriptDetector, scriptConverter);\nconst baseTranslationService = new LlmTranslationService(llmClient);\nconst translationService = new NormalizingTranslationService(scriptNormalizer, baseTranslationService);\n```\n\n## References\n- Design: `docs/002-devanagari/high-level-design.md`","status":"open","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-19T10:21:46.227432-08:00","created_by":"David Van Couvering","updated_at":"2026-01-19T10:21:46.227432-08:00","dependencies":[{"issue_id":"sanksrit-student-s9y","depends_on_id":"sanksrit-student-7xi","type":"blocks","created_at":"2026-01-19T10:22:01.382907-08:00","created_by":"David Van Couvering"}]}
{"id":"sanksrit-student-tbg","title":"Define TranslationService interface (port)","description":"Create interface that defines the contract for translation services in src/domain/translation-service.ts","status":"closed","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-17T14:51:23.626491-08:00","created_by":"David Van Couvering","updated_at":"2026-01-17T16:14:52.129498-08:00","closed_at":"2026-01-17T16:14:52.129498-08:00","close_reason":"Closed"}
{"id":"sanksrit-student-ts2","title":"Verify acceptance test passes with mock","description":"Run npm test and confirm the word-by-word translation acceptance test passes using the MockLlmClient. No API key required. This validates the full flow: GraphQL -\u003e TranslationService -\u003e MockLlmClient.","status":"closed","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-17T16:24:40.687977-08:00","created_by":"David Van Couvering","updated_at":"2026-01-17T18:17:02.493404-08:00","closed_at":"2026-01-17T18:17:02.493404-08:00","close_reason":"Closed","dependencies":[{"issue_id":"sanksrit-student-ts2","depends_on_id":"sanksrit-student-9yt","type":"blocks","created_at":"2026-01-17T16:24:40.691351-08:00","created_by":"David Van Couvering"}]}
{"id":"sanksrit-student-u2b","title":"Verify acceptance test passes","description":"Run npm test and confirm the word-by-word translation acceptance test passes with the real LLM integration","status":"closed","priority":2,"issue_type":"task","owner":"david.vancouvering@gmail.com","created_at":"2026-01-17T14:51:37.203134-08:00","created_by":"David Van Couvering","updated_at":"2026-01-17T16:22:48.91469-08:00","closed_at":"2026-01-17T16:22:48.91469-08:00","close_reason":"Description incorrectly says 'real LLM' - acceptance tests use mock per test-design.md","dependencies":[{"issue_id":"sanksrit-student-u2b","depends_on_id":"sanksrit-student-9m1","type":"blocks","created_at":"2026-01-17T14:51:37.206385-08:00","created_by":"David Van Couvering"}]}
